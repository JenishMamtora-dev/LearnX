<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
  <title>LearnX - Programming E-Learning</title>
  <link rel="stylesheet" href="./css/index.css">
</head>
<body>
  <header class="navbar-fixed">
    <div class="navbar-container">
      <h1 class="navbar-logo">LearnX</h1>
      <form class="navbar-search" onsubmit="event.preventDefault(); handleSearch();" autocomplete="off" style="position:relative;">
        <input type="text" id="navbarSearchInput" placeholder="Search courses, topics..." autocomplete="off" oninput="handleSearchInput()" onfocus="handleSearchInput()">
        <button type="submit"><i class='bx bx-search'></i></button>
        <div id="searchDropdown" class="search-dropdown" style="display:none;"></div>
      </form>
      <nav class="navbar-links" id="navbarLinks">
        <a href="#">Home</a>
        <a href="user1.html">My Courses</a>
        <a href="Feedback.html">Feedback</a>
        <a href="register.html">Register</a>
        <a href="login.html">Login</a>
      </nav>
      <button class="hamburger-btn" id="hamburgerBtn" onclick="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </header>
  <div class="mobile-menu" id="mobileMenu">
    <a href="#">Home</a>
    <a href="user1.html">My Courses</a>
    <a href="Feedback.html">Feedback</a>
    <a href="register.html">Register</a>
    <a href="login.html">Login</a>
  </div>
  <script>
    // Dropdown search logic
    let searchResults = [];
    function handleSearchInput() {
      const input = document.getElementById('navbarSearchInput');
      const dropdown = document.getElementById('searchDropdown');
      const query = input.value.trim().toLowerCase();
      dropdown.innerHTML = '';
      searchResults = [];
      if (!query) { dropdown.style.display = 'none'; return; }
      if (typeof coursesData !== 'undefined') {
        coursesData.forEach((course, ci) => {
          if (course.name.toLowerCase().includes(query)) {
            searchResults.push({type: 'course', name: course.name, courseIdx: ci});
          }
          course.syllabus.forEach((chap, i) => {
            if (chap.t.toLowerCase().includes(query) || chap.c.toLowerCase().includes(query)) {
              searchResults.push({type: 'chapter', course: course.name, title: chap.t, courseIdx: ci, chapterIdx: i});
            }
          });
        });
      }
      if (searchResults.length === 0) { dropdown.style.display = 'none'; return; }
      searchResults.forEach((r, idx) => {
        if (r.type === 'course') {
          dropdown.innerHTML += `<div class="search-item" onclick="goToSearchResult(${idx})"><b>Course:</b> ${r.name}</div>`;
        } else if (r.type === 'chapter') {
          dropdown.innerHTML += `<div class="search-item" onclick="goToSearchResult(${idx})">${r.title} <span style='color:#4CAF50'>(in ${r.course})</span></div>`;
        }
      });
      dropdown.style.display = 'block';
    }

    function handleSearch() {
      // On submit, go to first result if exists
      if (searchResults.length > 0) goToSearchResult(0);
      else {
        document.getElementById('searchDropdown').style.display = 'none';
        alert('No results found.');
      }
    }

    function goToSearchResult(idx) {
      const r = searchResults[idx];
      document.getElementById('searchDropdown').style.display = 'none';
      document.getElementById('navbarSearchInput').blur();
      if (r.type === 'course') {
        // Open course in app UI if available
        if (typeof openReader === 'function') {
          openReader(r.name);
        } else {
          // fallback: scroll to hero section
          location.hash = '#hero';
        }
      } else if (r.type === 'chapter') {
        // Open course and chapter in app UI if available
        if (typeof openReader === 'function' && typeof loadChapter === 'function') {
          openReader(r.course);
          setTimeout(() => { loadChapter(r.chapterIdx); }, 350);
        } else {
          location.hash = '#hero';
        }
      }
    }

    // Hide dropdown on click outside
    document.addEventListener('click', function(e) {
      const dropdown = document.getElementById('searchDropdown');
      const input = document.getElementById('navbarSearchInput');
      if (!dropdown || !input) return;
      if (!dropdown.contains(e.target) && e.target !== input) {
        dropdown.style.display = 'none';
      }
    });
  </script>
  <style>
    .search-dropdown {
      position: absolute;
      top: 110%;
      left: 0;
      width: 100%;
      background: #181818;
      border: 1.5px solid #333;
      border-radius: 0 0 12px 12px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.18);
      z-index: 3000;
      max-height: 260px;
      overflow-y: auto;
      color: #E0E0E0;
      font-size: 1rem;
      animation: fadeIn 0.18s;
    }
    .search-item {
      padding: 12px 18px;
      cursor: pointer;
      border-bottom: 1px solid #232323;
      transition: background 0.15s;
    }
    .search-item:last-child { border-bottom: none; }
    .search-item:hover {
      background: #232323;
      color: #4CAF50;
    }
  </style>

  <section class="hero hero-flex">
    <div class="hero-login">
      <h2 style="margin-bottom: 18px;">Sign in to LearnX</h2>
      <form class="login-form" onsubmit="event.preventDefault(); login();">
        <input id="email" class="inp" type="email" placeholder="Your e-mail" required>
        <input id="password" class="inp" type="password" placeholder="Your password" required>
        <div style="display:flex;align-items:center;margin:10px 0 18px 0;">
          <input type="checkbox" id="agree" required style="margin-right:8px;">
          <label for="agree" style="font-size:13px;color:white;">I agree to LearnX <a href="#" style="color:black;">Terms of Service</a>.</label>
        </div>
        <button class="btn btn-primary" style="width:100%; margin-bottom:10px;">Sign in</button>
      </form>
      <div style="font-size:13px;color:white;">Don't have an account? <a href="register.php" style="color:black;">Register</a></div>
    </div>
    <div class="hero-text">
      <h2 class="hero-title">The Easiest Way to Learn Programming ðŸš€</h2>
      <div class="hero-desc">
        <ul>
          <li>Master <span class="highlight">C</span>, <span class="highlight">C++</span>, <span class="highlight">HTML</span> & <span class="highlight">CSS</span></li>
          <li>Clear syntax and practical examples</li>
          <li>Step-by-step interactive lessons</li>
          <li>Track your progress and take quizzes</li>
        </ul>
      </div>
    </div>
  </section>


  <!-- Student App UI (dashboard + reader) -->
  <div class="content">
    <!-- Login Overlay -->
    <div id="login-screen">
      <div class="login-box">
        <h2>Student Login</h2>
        <input id="email" class="inp" placeholder="Email (demo@user.com)">
        <button class="btn btn-primary" style="width:100%; justify-content:center" onclick="login()">Start Learning</button>
      </div>
    </div>

    <!-- Main App Content -->
    <div id="app" style="display:none">
      <div class="main">
        <h2 style="margin-bottom:10px; margin-top: 40px; margin-left: 50px; font-size: 50px; max-width: 80%;">Learn Python, JavaScript, HTML, CSS, and more.</h2>
        <h3 style="margin-left: 50px; font-size: 24px; max-width: 50%; margin-bottom: 100px;">Choose between a range of beginner-friendly learning paths, hand-crafted by learning experts and backed by research</h3>
        <div id="grid" class="grid"></div>

        <!-- Reader overlay -->
        <div id="reader" class="reader-view" aria-hidden="true">
          <div class="toc-sidebar">
            <button class="btn btn-outline" style="width:100%; margin-bottom:18px" onclick="closeReader()"><i class='bx bx-left-arrow-alt'></i> Back</button>
            <h4 style="color:white; margin-bottom:10px">Chapters</h4>
            <div id="chapterList"></div>
          </div>

          <div class="content-area">
            <div class="top-tabs">
              <div class="tab active" onclick="switchTab('read')" id="tab-read"><i class='bx bx-book-open'></i> Read</div>
              <div class="tab" onclick="switchTab('notes')" id="tab-notes"><i class='bx bx-notepad'></i> My Notes</div>
              <div class="tab" onclick="switchTab('quiz')" id="tab-quiz"><i class='bx bx-bulb'></i> Quiz</div>
            </div>

            <div class="scroll-content">
              <div id="view-read">
                <h1 id="lessonTitle" style="font-size:28px; margin-bottom:20px">Title</h1>
                <div id="lessonText" style="line-height:1.7; color:#ccc; font-size:16px"></div>
              </div>

              <div id="view-notes" style="display:none">
                <h2 style="margin-bottom:15px">My Notes for this Chapter</h2>
                <p style="font-size:13px; color:var(--text-muted); margin-bottom:10px">Your notes are saved automatically to your browser.</p>
                <textarea id="noteInput" class="notes-box" placeholder="Type your key takeaways here..." oninput="saveNote()"></textarea>
                <div style="margin-top:10px; color:var(--success); font-size:12px; display:none" id="saveMsg"><i class='bx bx-check'></i> Saved</div>
              </div>

              <div id="view-quiz" style="display:none">
                <h2 style="margin-bottom:10px">Knowledge Check</h2>
                <div id="quizContainer" class="course-card" style="padding:18px; width:80%;"></div>
                <div id="quizResult" style="margin-top: 5px; width:80%; font-weight:bold"></div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>
  </div>

<div class="popup-overlay" id="popup" aria-hidden="true" role="dialog">
    <div class="pro-modal" role="document" aria-labelledby="upgrade-title">
      <span class="close-btn" onclick="closePopup()">&times;</span>
      <div class="icon-container"><span>ðŸš€</span></div>
      <h4 id="upgrade-title">Upgrade to Learn-X Pro</h4>
      <h5>Unlock unlimited access of Courses, premium support, and exclusive chatbot features today.</h5>
      <a href="upgrade.html"><button class="btn-upgrade">Get Started</button></a>
    </div>
  </div>
  
  <footer>
    <p>Â©2025 All rights reserved. Learn X</p>
    <p>Keep Learning. Keep Coding. ðŸ’»</p>
  </footer>

  <script src="./js/index.js"></script>

</body>
</html>
